# 飞书分享插件 - 测试检查清单

## 📋 测试前准备

### ✅ 文件准备检查
- [ ] `main.js` 文件存在（构建生成）
- [ ] `manifest.json` 文件存在
- [ ] 飞书应用已创建，获得 App ID 和 App Secret
- [ ] 飞书应用重定向 URL 已设置为：`obsidian://feishu-share-callback`
- [ ] 飞书应用权限已申请：
  - [ ] `contact:user.base:readonly`
  - [ ] `docs:doc:create`
  - [ ] `drive:explorer:readonly`

### 🔧 安装步骤
1. **自动安装（推荐）**
   - Windows: 运行 `install-to-obsidian.bat`
   - macOS/Linux: 运行 `./install-to-obsidian.sh`

2. **手动安装**
   - 复制 `main.js` 和 `manifest.json` 到：
   - `{你的笔记库}/.obsidian/plugins/obsidian-feishu-share/`

3. **启用插件**
   - Obsidian 设置 → 第三方插件 → 关闭安全模式 → 启用"飞书分享"

## 🧪 功能测试清单

### 1. 插件基础功能
- [ ] 插件在 Obsidian 中正常加载
- [ ] 设置界面可以正常打开
- [ ] 命令面板中能找到"分享到飞书"命令

### 2. 应用配置测试
- [ ] 能够输入 App ID
- [ ] 能够输入 App Secret（密码框）
- [ ] 配置完成后显示"应用配置已完成"
- [ ] 授权按钮变为可点击状态

### 3. OAuth 授权测试
- [ ] 点击"开始授权"按钮
- [ ] 浏览器弹出飞书授权页面
- [ ] 飞书页面显示正确的应用信息
- [ ] 授权成功后 Obsidian 显示成功通知
- [ ] 设置界面显示"已授权"状态
- [ ] 显示用户昵称信息

### 4. 文件夹选择测试
- [ ] 授权后能看到"选择文件夹"按钮
- [ ] 点击后弹出文件夹选择模态框
- [ ] 能看到飞书云空间的文件夹列表
- [ ] 面包屑导航正常工作
- [ ] 能进入子文件夹
- [ ] 能返回上级文件夹
- [ ] 选择文件夹后设置正确保存

### 5. 分享功能测试
- [ ] 打开 `测试文档.md`
- [ ] 右上角菜单中有"分享到飞书"选项
- [ ] 右键菜单中有"分享到飞书"选项
- [ ] 点击分享后显示"正在分享到飞书..."
- [ ] 分享成功后显示成功通知
- [ ] 通知中包含飞书文档链接
- [ ] 点击链接能打开飞书文档
- [ ] 复制链接功能正常

### 6. 内容处理验证
在飞书文档中检查以下内容：
- [ ] 标题正确显示
- [ ] 标准 Markdown 格式正常
- [ ] 粗体、斜体、代码块正常
- [ ] 列表和表格正常
- [ ] 网络图片正常显示
- [ ] `[[双向链接]]` 转换为 `📝 链接名`
- [ ] `![[嵌入文件]]` 转换为 `📎 嵌入文件：文件名`
- [ ] 本地图片显示为提示文本

## 🐛 错误处理测试

### 配置错误测试
- [ ] 未配置 App ID 时授权按钮禁用
- [ ] 错误的 App ID/Secret 显示相应错误
- [ ] 网络错误时显示友好提示

### 授权错误测试
- [ ] 授权失败时显示错误信息
- [ ] Token 过期时自动刷新
- [ ] 刷新失败时提示重新授权

### 分享错误测试
- [ ] 未授权时提示需要授权
- [ ] 非 Markdown 文件提示不支持
- [ ] 网络错误时显示错误信息
- [ ] 权限不足时显示相应提示

## 📊 性能测试

### 响应时间测试
- [ ] 插件加载时间 < 2秒
- [ ] 授权流程响应时间 < 5秒
- [ ] 文件夹加载时间 < 3秒
- [ ] 小文档分享时间 < 5秒
- [ ] 大文档（>1MB）分享时间 < 15秒

### 稳定性测试
- [ ] 连续分享 5 个文档无错误
- [ ] 重启 Obsidian 后插件正常工作
- [ ] 网络中断后恢复正常
- [ ] 长时间使用后无内存泄漏

## 🔍 兼容性测试

### Obsidian 版本
- [ ] 最新版本 Obsidian
- [ ] 较旧版本 Obsidian（如果可能）

### 操作系统
- [ ] Windows 10/11
- [ ] macOS
- [ ] Linux

### 文档类型
- [ ] 简单 Markdown 文档
- [ ] 复杂格式文档
- [ ] 包含中文的文档
- [ ] 包含特殊字符的文档
- [ ] 大文档（>100KB）

## 📝 测试报告

### 测试环境信息
```
测试日期：
Obsidian 版本：
操作系统：
飞书应用类型：□ 企业自建应用 □ 个人应用
```

### 测试结果统计
```
✅ 通过测试项：___/___
❌ 失败测试项：___/___
⚠️ 部分通过项：___/___
```

### 发现的问题
```
1. 问题描述：
   严重程度：□ 高 □ 中 □ 低
   复现步骤：
   错误信息：
   建议解决方案：

2. 问题描述：
   严重程度：□ 高 □ 中 □ 低
   复现步骤：
   错误信息：
   建议解决方案：
```

### 改进建议
```
1. 功能改进：
2. 用户体验：
3. 性能优化：
4. 错误处理：
```

## 🎯 测试完成标准

### 基础功能必须通过
- ✅ 插件正常加载和配置
- ✅ OAuth 授权流程完整
- ✅ 基础分享功能正常
- ✅ 内容处理基本正确

### 高级功能建议通过
- ✅ 文件夹选择功能
- ✅ 错误处理友好
- ✅ 性能表现良好

---

**测试完成后，请将结果反馈给开发者，以便进一步优化插件功能！** 🚀
